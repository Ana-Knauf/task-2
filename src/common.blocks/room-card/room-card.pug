include ../../common.elements/rate-button/rate-button.pug

mixin room-card(roomCardData)
    -
        let {blockName, room, lux, price, reviews, img} = roomCardData

        let divClass = `room-card ${ (blockName) ? blockName + '__room-card' : '' }`;
        let bottomClass = `room-card-bottom-block ${ (blockName) ? blockName + '__room-card-bottom-block' : '' }`;
        let alignClass = `room-card-align-block ${ (blockName) ? blockName + '__room-card-align-block' : '' }`;
        let roomClass = `room-card-room-block ${ (blockName) ? blockName + '__room-card-room-block' : '' }`;
        let priceClass = `room-card-price-block ${ (blockName) ? blockName + '__room-card-price-block' : '' }`;
        let numClass = `room-card-num-span ${ (blockName) ? blockName + '__room-card-num-span' : '' }`;
        let nRoomClass = `room-card-room-span ${ (blockName) ? blockName + '__room-card-room-span' : '' }`;
        let luxClass = `room-card-lux-span ${ (blockName) ? blockName + '__room-card-lux-span' : '' }`;
        let nPriceClass = `room-card-price-span ${ (blockName) ? blockName + '__room-card-price-span' : '' }`;
        let dailyClass = `room-card-daily-span ${ (blockName) ? blockName + '__room-card-daily-span' : '' }`;
        let divReviewsClass = `room-card-reviews-block ${ (blockName) ? blockName + '__room-card-reviews-block' : '' }`;
        let nReviewsClass = `room-card-n-reviews-span ${ (blockName) ? blockName + '__room-card-n-reviews-span' : '' }`;
        let reviewsClass = `room-card-reviews-span ${ (blockName) ? blockName + '__room-card-reviews-span' : '' }`;
        let lineClass = `room-card-line ${ (blockName) ? blockName + '__room-card-line' : '' }`;
        let imgClass = `room-card-img ${ (blockName) ? blockName + '__room-card-img' : '' }`;
        let roomPageClass = `room-card-page-link ${ (blockName) ? blockName + '__room-card-page-link' : '' }`;

        let imgBackClass = `room-card-back-img ${ (blockName) ? blockName + '__room-card-back-img' : '' }`;
        let imgForthClass = `room-card-forth-img ${ (blockName) ? blockName + '__room-card-forth-img' : '' }`;
        let btnBackClass = `room-card-back-button ${ (blockName) ? blockName + '__room-card-back-button' : '' }`;
        let btnForthClass = `room-card-forth-button ${ (blockName) ? blockName + '__room-card-forth-button' : '' }`;

        let swipeClass = `room-card-swipe-block ${ (blockName) ? blockName + '__room-card-swipe-block' : '' }`;
        let radioClass = `room-card-swipe-radio ${ (blockName) ? blockName + '__room-card-swipe-radio' : '' }`;
        let checkmarkClass = `room-card-swipe-checkmark ${ (blockName) ? blockName + '__room-card-swipe-checkmark' : '' }`;

        let includesClass = `${ (blockName) ? blockName + '__room-card' : 'room-card' }`;

        let roomNumber = room.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g, "$1" + ' ');
        roomNumber = " " + roomNumber + " ";
        let roomPrice = price.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g, "$1" + ' ');
        roomPrice = roomPrice + "\u20BD ";
        let roomReviews = reviews.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g, "$1" + ' ');
        roomReviews = roomReviews + " ";

        let imgPath = "assets/img/";
        imgPath = imgPath + img;
        let n = 1;
        let idDefiner;
        let radioName = blockName + "swipe-buttons";

    div(class = divClass)
        a(class = roomPageClass href="book-page.html")
            img(class = imgClass src = imgPath alt = "Фотография номера")
        div(class = imgBackClass)
        button(class = btnBackClass)
        div(class = imgForthClass)
        button(class = btnForthClass)
        div(class = swipeClass)
            while n <= 4
                - idDefiner = blockName + "swipe" + n;
                input(class = radioClass type = "radio" id = idDefiner name = radioName hidden)
                label(for = idDefiner class = checkmarkClass)
                - n++;
        div(class = bottomClass)
            div(class = alignClass)
                div(class = roomClass)
                    span(class = numClass) №
                    span(class = nRoomClass)= roomNumber
                    if (lux)
                        span(class = luxClass) люкс
                div(class = priceClass)
                    span(class = nPriceClass)= roomPrice
                    span(class = dailyClass) в сутки
            div(class = lineClass)
            div(class = alignClass)
                - const rateButtonData = { blockName: includesClass }
                +rate-button(rateButtonData)
                div(class = divReviewsClass)
                    span(class = nReviewsClass)= roomReviews
                    span(class = reviewsClass) Отзывов

